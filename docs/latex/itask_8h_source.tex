\hypertarget{itask_8h_source}{}\doxysection{itask.\+h}
\label{itask_8h_source}\index{src/sched/itask.h@{src/sched/itask.h}}
\mbox{\hyperlink{itask_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00009}00009 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00011}00011 \textcolor{preprocessor}{\#include <pthread.h>}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00012}00012 \textcolor{preprocessor}{\#include <chrono>}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00013}00013 \textcolor{preprocessor}{\#include "{}spdlog/spdlog.h"{}}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00016}\mbox{\hyperlink{itask_8h_a45341416bad52f4521710698d33ba475}{00016}} \textcolor{preprocessor}{\#define TASK\_MIN\_PERIOD (100000U)}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00018}00018 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_e_a_r}{EAR}} \{}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00019}\mbox{\hyperlink{namespace_e_a_r_1_1_schedule}{00019}}   \textcolor{keyword}{namespace }Schedule \{  }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00021}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{00021}}     \textcolor{keyword}{class }\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{ITask}} \{}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00022}00022       \textcolor{comment}{// scheduler uses task interface}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00023}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_afb88c77ea5daaefa6c8fa6bc5b9aa5c1}{00023}}       \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_scheduler}{Scheduler}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00024}00024       }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00025}00025     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00027}00027       \textcolor{keyword}{explicit} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a32dd611d56854185a6282bdc848a8de5}{ITask}}(\textcolor{keyword}{const} std::string \&name);       }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00029}00029       \textcolor{keyword}{virtual} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a1ea9fd2c4cf123c08fa5001d9371e114}{\string~ITask}}();}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00032}00032       uint32\_t \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a095032c759ed51ba5a08e8bee8e8d567}{getId}}(\textcolor{keywordtype}{void}) \textcolor{keyword}{const};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00035}00035       std::string \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_ab23edb8bcddff6eb970c1118e154e1ab}{getName}}(\textcolor{keywordtype}{void}) \textcolor{keyword}{const};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00037}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a266bce111cbc83819da3d3f0141420cd}{00037}}       \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a266bce111cbc83819da3d3f0141420cd}{initialize}}(\textcolor{keywordtype}{void}) = 0;        }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00039}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_aae2fbb8656ec821945de80d16dc4911f}{00039}}       \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_aae2fbb8656ec821945de80d16dc4911f}{cycle}}(\textcolor{keywordtype}{void}) = 0;}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00041}00041     \textcolor{keyword}{protected}:}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00043}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_acba24d98a3594e6b6a617af9dd0d08f8}{00043}}       std::chrono::microseconds \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_acba24d98a3594e6b6a617af9dd0d08f8}{m\_period}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00045}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a3f2ccd66c4d524a3fba6be83661fd345}{00045}}       std::chrono::microseconds \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a3f2ccd66c4d524a3fba6be83661fd345}{m\_offset}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00047}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a4a841d1f26644e2d99c19b71b2ec7284}{00047}}       \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a4a841d1f26644e2d99c19b71b2ec7284}{m\_is\_running}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00049}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a1865f7ee4f6fd0f2caca75afaba496eb}{00049}}       pthread\_mutex\_t \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a1865f7ee4f6fd0f2caca75afaba496eb}{m\_start\_mutex}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00051}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_ab43cc11afcb7624696e31d13f267f4f5}{00051}}       pthread\_cond\_t \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_ab43cc11afcb7624696e31d13f267f4f5}{m\_start\_cond\_var}};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00052}00052       }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00055}00055       \textcolor{keywordtype}{void} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_ae4e7e35e6d7fff4ce5333b94a80a9772}{setPeriod}}(\textcolor{keyword}{const} std::chrono::microseconds period);      }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00058}00058       \textcolor{keywordtype}{void} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_af7ca7c1445e7b8444150248a5a561958}{setOffset}}(\textcolor{keyword}{const} std::chrono::microseconds offset);      }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00061}00061       \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a0dd7f17c879dd81c926c93503b4a37cf}{start}}(\textcolor{keywordtype}{void});      }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00064}00064       \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a1ec0d1b0bd7fe07997c937ce2d7915ac}{stop}}(\textcolor{keywordtype}{void});        }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00067}\mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a0ba642a735270ad37d7a1c256c070915}{00067}}       \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a0ba642a735270ad37d7a1c256c070915}{execute}}(\textcolor{keywordtype}{void}) = 0;}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00069}00069     \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00071}00071       uint32\_t m\_id;}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00073}00073       std::string m\_name;}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00075}00075       \textcolor{comment}{// copyable and movable task interface prevented}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00076}00076       \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a32dd611d56854185a6282bdc848a8de5}{ITask}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{ITask}} \&task) = \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00077}00077       \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task_a32dd611d56854185a6282bdc848a8de5}{ITask}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{ITask}} \&\&task) = \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00078}00078       \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{ITask}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{class_e_a_r_1_1_schedule_1_1_i_task}{ITask}} \&task) = \textcolor{keyword}{delete};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00079}00079     \};}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00080}00080   \}}
\DoxyCodeLine{\Hypertarget{itask_8h_source_l00081}00081 \}}

\end{DoxyCode}
